{"version":3,"file":"diagnostico-projeto.js","sourceRoot":"","sources":["../../src/arquitetos/diagnostico-projeto.ts"],"names":[],"mappings":"AAGA;;GAEG;AACH,MAAM,UAAU,mBAAmB,CAAC,MAAqB;IACvD,MAAM,SAAS,GAAG,MAAM,CAAC,OAAO,CAAC,MAAM,CAAC;SACrC,MAAM,CAAC,CAAC,CAAC,EAAE,KAAK,CAAC,EAAE,EAAE,CAAC,KAAK,KAAK,IAAI,CAAC;SACrC,GAAG,CAAC,CAAC,CAAC,KAAK,CAAC,EAAE,EAAE,CAAC,KAA4B,CAAC,CAAC;IAElD,IAAI,IAAI,GAA+B,cAAc,CAAC;IACtD,IAAI,SAAS,GAAG,GAAG,CAAC;IAEpB,IAAI,aAAa,IAAI,MAAM,IAAI,MAAM,CAAC,WAAW,EAAE,CAAC;QAClD,IAAI,GAAG,WAAW,CAAC;QACnB,SAAS,GAAG,IAAI,CAAC;IACnB,CAAC;SAAM,IAAI,YAAY,IAAI,MAAM,IAAI,MAAM,CAAC,UAAU,EAAE,CAAC;QACvD,IAAI,GAAG,UAAU,CAAC;QAClB,SAAS,GAAG,IAAI,CAAC;IACnB,CAAC;SAAM,IAAI,SAAS,CAAC,MAAM,CAAC,EAAE,CAAC;QAC7B,IAAI,GAAG,SAAS,CAAC;QACjB,SAAS,GAAG,IAAI,CAAC;IACnB,CAAC;SAAM,IAAI,KAAK,CAAC,MAAM,CAAC,EAAE,CAAC;QACzB,IAAI,GAAG,KAAK,CAAC;QACb,SAAS,GAAG,IAAI,CAAC;IACnB,CAAC;SAAM,IAAI,KAAK,CAAC,MAAM,CAAC,EAAE,CAAC;QACzB,IAAI,GAAG,KAAK,CAAC;QACb,SAAS,GAAG,IAAI,CAAC;IACnB,CAAC;SAAM,IAAI,KAAK,CAAC,MAAM,CAAC,EAAE,CAAC;QACzB,IAAI,GAAG,KAAK,CAAC;QACb,SAAS,GAAG,GAAG,CAAC;IAClB,CAAC;IAED,yFAAyF;IACzF,OAAO,EAAE,IAAI,EAAE,MAAM,EAAE,SAAS,EAAE,cAAc,EAAE,SAAS,EAAE,CAAC;AAChE,CAAC;AAED,SAAS,SAAS,CAAC,CAAgB;IACjC,2EAA2E;IAC3E,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,QAAQ,KAAK,IAAI,CAAC,CAAC;AACjC,CAAC;AAED,SAAS,KAAK,CAAC,CAAgB;IAC7B,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,MAAM,IAAI,CAAC,CAAC,cAAc,IAAI,CAAC,CAAC,UAAU,CAAC,CAAC;AAC1D,CAAC;AAED,SAAS,KAAK,CAAC,CAAgB;IAC7B,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,MAAM,IAAI,CAAC,CAAC,CAAC,aAAa,IAAI,CAAC,CAAC,CAAC,CAAC,MAAM,IAAI,KAAK,CAAC,CAAC,CAAC;AAClE,CAAC;AAED,SAAS,KAAK,CAAC,CAAgB;IAC7B,OAAO,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC;AACpB,CAAC","sourcesContent":["// SPDX-License-Identifier: MIT\r\nimport type { SinaisProjeto, DiagnosticoProjeto } from '../tipos/tipos.js';\r\n\r\n/**\r\n * Recebe sinais coletados e devolve o diagnóstico\r\n */\r\nexport function diagnosticarProjeto(sinais: SinaisProjeto): DiagnosticoProjeto {\r\n  const positivos = Object.entries(sinais)\r\n    .filter(([, valor]) => valor === true)\r\n    .map(([chave]) => chave as keyof SinaisProjeto);\r\n\r\n  let tipo: DiagnosticoProjeto['tipo'] = 'desconhecido';\r\n  let confianca = 0.3;\r\n\r\n  if ('ehFullstack' in sinais && sinais.ehFullstack) {\r\n    tipo = 'fullstack';\r\n    confianca = 0.95;\r\n  } else if ('ehMonorepo' in sinais && sinais.ehMonorepo) {\r\n    tipo = 'monorepo';\r\n    confianca = 0.99;\r\n  } else if (ehLanding(sinais)) {\r\n    tipo = 'landing';\r\n    confianca = 0.92;\r\n  } else if (ehApi(sinais)) {\r\n    tipo = 'api';\r\n    confianca = 0.88;\r\n  } else if (ehCli(sinais)) {\r\n    tipo = 'cli';\r\n    confianca = 0.85;\r\n  } else if (ehLib(sinais)) {\r\n    tipo = 'lib';\r\n    confianca = 0.8;\r\n  }\r\n\r\n  // Mantém valor de confiança original (0..1) sem arredondar para evitar perda de precisão\r\n  return { tipo, sinais: positivos, confiabilidade: confianca };\r\n}\r\n\r\nfunction ehLanding(s: SinaisProjeto): boolean {\r\n  // Considera landing se temPages for true, mesmo sem components/controllers\r\n  return !!(s.temPages === true);\r\n}\r\n\r\nfunction ehApi(s: SinaisProjeto): boolean {\r\n  return !!(s.temApi ?? s.temControllers ?? s.temExpress);\r\n}\r\n\r\nfunction ehLib(s: SinaisProjeto): boolean {\r\n  return !!(s.temSrc && !s.temComponents && !(s.temApi ?? false));\r\n}\r\n\r\nfunction ehCli(s: SinaisProjeto): boolean {\r\n  return !!s.temCli;\r\n}\r\n"]}