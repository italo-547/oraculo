{"version":3,"file":"traverse.js","sourceRoot":"","sources":["../../../src/nucleo/constelacao/traverse.ts"],"names":[],"mappings":"AAAA,+BAA+B;AAC/B,OAAO,cAAc,MAAM,iBAAiB,CAAC;AAQ7C,IAAI,eAAe,GAAY,cAAc,CAAC;AAE9C,iEAAiE;AACjE,MAAM,UAAU,mBAAmB,CAAC,MAAe;IACjD,eAAe,GAAG,MAAM,CAAC;AAC3B,CAAC;AAED,MAAM,UAAU,QAAQ,CAAC,GAAG,IAAe;IACzC,MAAM,GAAG,GAAG,eAA0B,CAAC;IACvC,IAAI,EAA0B,CAAC;IAC/B,IAAI,OAAO,GAAG,KAAK,UAAU,EAAE,CAAC;QAC9B,EAAE,GAAG,GAAiB,CAAC;IACzB,CAAC;SAAM,IAAI,GAAG,IAAI,OAAQ,GAA6B,CAAC,OAAO,KAAK,UAAU,EAAE,CAAC;QAC/E,EAAE,GAAI,GAA4B,CAAC,OAAqB,CAAC;IAC3D,CAAC;SAAM,IAAI,GAAG,IAAI,OAAQ,GAA8B,CAAC,QAAQ,KAAK,UAAU,EAAE,CAAC;QACjF,EAAE,GAAI,GAA6B,CAAC,QAAsB,CAAC;IAC7D,CAAC;IACD,IAAI,CAAC,EAAE,EAAE,CAAC;QACR,MAAM,IAAI,SAAS,CAAC,oEAAoE,CAAC,CAAC;IAC5F,CAAC;IACD,OAAO,EAAE,CAAC,GAAG,IAAI,CAAC,CAAC;AACrB,CAAC","sourcesContent":["// SPDX-License-Identifier: MIT\r\nimport traverseModule from '@babel/traverse';\r\n\r\n/**\r\n * Wrapper resiliente para o `@babel/traverse` lidando com variações de ESM/CJS.\r\n * Algumas builds expõem a função no `default`, outras como export do módulo CJS.\r\n */\r\ntype TraverseFn = (...a: unknown[]) => unknown;\r\n\r\nlet _traverseModule: unknown = traverseModule;\r\n\r\n// Setter usado apenas em testes para injetar variações do módulo\r\nexport function __setTraverseModule(modulo: unknown) {\r\n  _traverseModule = modulo;\r\n}\r\n\r\nexport function traverse(...args: unknown[]): unknown {\r\n  const mod = _traverseModule as unknown;\r\n  let fn: TraverseFn | undefined;\r\n  if (typeof mod === 'function') {\r\n    fn = mod as TraverseFn;\r\n  } else if (mod && typeof (mod as { default?: unknown }).default === 'function') {\r\n    fn = (mod as { default: unknown }).default as TraverseFn;\r\n  } else if (mod && typeof (mod as { traverse?: unknown }).traverse === 'function') {\r\n    fn = (mod as { traverse: unknown }).traverse as TraverseFn;\r\n  }\r\n  if (!fn) {\r\n    throw new TypeError('Babel traverse não é uma função — verifique a resolução de módulo.');\r\n  }\r\n  return fn(...args);\r\n}\r\n"]}