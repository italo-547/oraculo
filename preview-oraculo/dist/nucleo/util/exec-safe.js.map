{"version":3,"file":"exec-safe.js","sourceRoot":"","sources":["../../../src/nucleo/util/exec-safe.ts"],"names":[],"mappings":"AAAA,+BAA+B;AAC/B,OAAO,EAAE,MAAM,EAAE,MAAM,+BAA+B,CAAC;AACvD,OAAO,EAAE,QAAQ,EAAwB,MAAM,oBAAoB,CAAC;AAEpE,MAAM,UAAU,mBAAmB,CAAC,GAAW,EAAE,OAAwB,EAAE;IACzE,qEAAqE;IACrE,IAAI,MAAM,CAAC,SAAS,KAAK,IAAI,IAAI,CAAC,MAAM,CAAC,UAAU,EAAE,CAAC;QACpD,MAAM,IAAI,KAAK,CACb,4FAA4F,CAC7F,CAAC;IACJ,CAAC;IACD,OAAO,QAAQ,CAAC,GAAG,EAAE,IAAI,CAAC,CAAC;AAC7B,CAAC;AAED,MAAM,CAAC,KAAK,UAAU,wBAAwB,CAAC,GAAW,EAAE,OAAwB,EAAE;IACpF,iEAAiE;IACjE,OAAO,mBAAmB,CAAC,GAAG,EAAE,IAAI,CAAC,CAAC;AACxC,CAAC","sourcesContent":["// SPDX-License-Identifier: MIT\r\nimport { config } from '@nucleo/constelacao/cosmos.js';\r\nimport { execSync, type ExecSyncOptions } from 'node:child_process';\r\n\r\nexport function executarShellSeguro(cmd: string, opts: ExecSyncOptions = {}) {\r\n  // only block if SAFE_MODE is explicitly true and ALLOW_EXEC is falsy\r\n  if (config.SAFE_MODE === true && !config.ALLOW_EXEC) {\r\n    throw new Error(\r\n      'Execução de comandos desabilitada em SAFE_MODE. Defina ORACULO_ALLOW_EXEC=1 para permitir.',\r\n    );\r\n  }\r\n  return execSync(cmd, opts);\r\n}\r\n\r\nexport async function executarShellSeguroAsync(cmd: string, opts: ExecSyncOptions = {}) {\r\n  // wrapper assíncrono que delega ao sync (usado onde já há await)\r\n  return executarShellSeguro(cmd, opts);\r\n}\r\n"]}