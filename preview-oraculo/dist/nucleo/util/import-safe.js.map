{"version":3,"file":"import-safe.js","sourceRoot":"","sources":["../../../src/nucleo/util/import-safe.ts"],"names":[],"mappings":"AAAA,+BAA+B;AAC/B,OAAO,EAAE,MAAM,EAAE,MAAM,0BAA0B,CAAC;AAClD,OAAO,EAAE,oBAAoB,EAAE,MAAM,6BAA6B,CAAC;AAEnE,MAAM,CAAC,KAAK,UAAU,oBAAoB,CAAC,OAAe,EAAE,SAAiB;IAC3E,IAAI,MAAM,CAAC,SAAS,IAAI,CAAC,MAAM,CAAC,aAAa,EAAE,CAAC;QAC9C,MAAM,IAAI,KAAK,CACb,kGAAkG,CACnG,CAAC;IACJ,CAAC;IACD,MAAM,SAAS,GAAG,oBAAoB,CAAC,OAAO,EAAE,SAAS,CAAC,CAAC;IAC3D,IAAI,SAAS,CAAC,IAAI;QAAE,MAAM,IAAI,KAAK,CAAC,qBAAqB,SAAS,CAAC,IAAI,EAAE,CAAC,CAAC;IAC3E,IAAI,CAAC,SAAS,CAAC,OAAO;QAAE,MAAM,IAAI,KAAK,CAAC,iCAAiC,CAAC,CAAC;IAC3E,oDAAoD;IACpD,OAAO,MAAM,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC;AACnC,CAAC","sourcesContent":["// SPDX-License-Identifier: MIT\r\nimport { config } from '../constelacao/cosmos.js';\r\nimport { resolverPluginSeguro } from '../constelacao/seguranca.js';\r\n\r\nexport async function importarModuloSeguro(baseDir: string, pluginRel: string) {\r\n  if (config.SAFE_MODE && !config.ALLOW_PLUGINS) {\r\n    throw new Error(\r\n      'Carregamento de plugins desabilitado em SAFE_MODE. Defina ORACULO_ALLOW_PLUGINS=1 para permitir.',\r\n    );\r\n  }\r\n  const resolvido = resolverPluginSeguro(baseDir, pluginRel);\r\n  if (resolvido.erro) throw new Error(`Plugin bloqueado: ${resolvido.erro}`);\r\n  if (!resolvido.caminho) throw new Error('Caminho de plugin não resolvido');\r\n  // permite que o chamador capture exceções do plugin\r\n  return import(resolvido.caminho);\r\n}\r\n"]}